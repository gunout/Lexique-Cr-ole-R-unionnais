<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lexique Cr√©ole R√©unionnais - Dictionnaire Interactif</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="dictionnaire.js"></script>
    <style>
        /* --- Variables & Global Styles --- */
        :root {
            --bg-primary: #0a0e1a;
            --bg-secondary: #141929;
            --bg-card: rgba(255, 255, 255, 0.05);
            --text-primary: #e0e6ed;
            --text-secondary: #a0a9b8;
            --accent-cyan: #00d4ff;
            --accent-magenta: #ff00d4;
            --accent-purple: #8b5cf6;
            --accent-orange: #ff7f00;
            --border-color: rgba(255, 255, 255, 0.1);
            --shadow-glow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 0, 212, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
        }

        /* --- Header --- */
        .top-header {
            background-color: var(--bg-secondary);
            padding: 1.5rem 2rem;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .search-container {
            max-width: 600px;
            margin: 2rem auto 0;
            position: relative;
        }

        .search-bar {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 1rem 1.5rem;
            border-radius: 50px;
            font-size: 1.1rem;
            width: 100%;
            transition: all 0.3s ease;
        }

        .search-bar:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: var(--shadow-glow);
        }

        .search-count {
            text-align: center;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        /* --- Main Layout --- */
        .app-container {
            display: flex;
            min-height: calc(100vh - 200px);
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* --- Sidebar --- */
        .sidebar {
            flex: 0 0 300px;
            background-color: var(--bg-secondary);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid var(--border-color);
            margin-right: 2rem;
            height: fit-content;
        }

        .sidebar h2 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: var(--accent-cyan);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .alphabet-nav {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .alphabet-btn {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.75rem;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .alphabet-btn:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--accent-cyan);
            transform: translateY(-2px);
        }

        .alphabet-btn.active {
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-purple));
            color: var(--bg-primary);
            border-color: transparent;
        }

        .stats {
            background: var(--bg-card);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .stat-value {
            color: var(--accent-cyan);
            font-weight: 600;
        }

        /* --- Main Content --- */
        .main-content {
            flex: 1;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .view-toggle {
            display: flex;
            gap: 0.5rem;
            background: var(--bg-secondary);
            padding: 0.5rem;
            border-radius: 50px;
            border: 1px solid var(--border-color);
        }

        .view-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-btn.active {
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-purple));
            color: var(--bg-primary);
        }

        /* --- Word Grid --- */
        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            animation: fadeIn 0.5s ease-in-out;
        }

        .word-card {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .word-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-orange));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .word-card:hover::before {
            transform: scaleX(1);
        }

        .word-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
            border-color: var(--accent-cyan);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .word-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .word-meta {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
        }

        .icon-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.2rem;
            transition: color 0.3s ease;
        }

        .icon-btn:hover {
            color: var(--accent-cyan);
        }

        .icon-btn.active {
            color: var(--accent-magenta);
        }

        .definition {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.5;
            flex-grow: 1;
        }

        /* --- List View --- */
        .word-list {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .word-list.active {
            display: block;
        }

        .list-item {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-item:hover {
            border-color: var(--accent-cyan);
            transform: translateX(5px);
        }

        .list-word {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .list-definition {
            color: var(--text-secondary);
            font-size: 0.9rem;
            max-width: 60%;
        }

        /* --- Modal --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 14, 26, 0.9);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.4s;
        }

        .modal-content {
            background-color: var(--bg-secondary);
            margin: 2% auto;
            padding: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.4s;
            position: relative;
        }

        .close-btn {
            color: var(--text-secondary);
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
        }

        .close-btn:hover {
            color: var(--text-primary);
        }

        .modal-word {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-definition {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-purple));
            color: var(--bg-primary);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .voice-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .voice-select {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
                padding: 1rem;
            }

            .sidebar {
                margin-right: 0;
                margin-bottom: 2rem;
                width: 100%;
            }

            .alphabet-nav {
                grid-template-columns: repeat(4, 1fr);
            }

            .word-grid {
                grid-template-columns: 1fr;
            }

            .content-header {
                flex-direction: column;
                gap: 1rem;
            }

            .list-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .list-definition {
                max-width: 100%;
            }

            .modal-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="top-header">
        <div class="logo">üó£Ô∏è Lexique Cr√©ole R√©unionnais</div>
        <div class="subtitle">Dictionnaire interactif - Plus de <span id="total-words">0</span> mots</div>
        
        <div class="search-container">
            <input type="search" id="search-input" class="search-bar" placeholder="Rechercher un mot cr√©ole ou sa d√©finition...">
            <div class="search-count" id="search-count">Tapez pour rechercher</div>
        </div>
    </header>

    <div class="app-container">
        <aside class="sidebar">
            <h2>Navigation</h2>
            
            <div class="alphabet-nav" id="alphabet-nav">
                <!-- Les boutons de l'alphabet seront g√©n√©r√©s ici -->
            </div>

            <div class="stats">
                <div class="stat-item">
                    <span>Mots affich√©s:</span>
                    <span class="stat-value" id="displayed-count">0</span>
                </div>
                <div class="stat-item">
                    <span>Favoris:</span>
                    <span class="stat-value" id="favorites-count">0</span>
                </div>
                <div class="stat-item">
                    <span>Lettre active:</span>
                    <span class="stat-value" id="active-letter">Toutes</span>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <div class="content-header">
                <h2 id="current-view-title">Tous les mots</h2>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="grid">üü∞ Grille</button>
                    <button class="view-btn" data-view="list">üìÉ Liste</button>
                </div>
            </div>

            <div class="word-grid" id="word-grid">
                <!-- Les cartes des mots seront g√©n√©r√©es ici -->
            </div>

            <div class="word-list" id="word-list">
                <!-- La liste des mots sera g√©n√©r√©e ici -->
            </div>
        </main>
    </div>

    <!-- Modal pour afficher les d√©tails d'un mot -->
    <div id="word-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div class="modal-body">
                <h1 class="modal-word" id="modal-word"></h1>
                <p class="modal-definition" id="modal-definition"></p>
                
                <div class="voice-controls">
                    <select id="voice-select" class="voice-select">
                        <option value="">Choisir une voix</option>
                    </select>
                    <button class="btn" id="speak-btn">üîä Prononcer</button>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-secondary" id="favorite-modal-btn">‚ù§Ô∏è Ajouter aux favoris</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Conversion du dictionnaire en tableau utilisable
        const wordsArray = Object.entries(dictionnaire).map(([word, definition], index) => ({
            id: index,
            word: word,
            definition: definition,
            firstLetter: word.charAt(0).toUpperCase()
        }));

        // √âl√©ments du DOM
        const searchInput = document.getElementById('search-input');
        const searchCount = document.getElementById('search-count');
        const totalWords = document.getElementById('total-words');
        const displayedCount = document.getElementById('displayed-count');
        const favoritesCount = document.getElementById('favorites-count');
        const activeLetter = document.getElementById('active-letter');
        const alphabetNav = document.getElementById('alphabet-nav');
        const wordGrid = document.getElementById('word-grid');
        const wordList = document.getElementById('word-list');
        const viewBtns = document.querySelectorAll('.view-btn');
        const modal = document.getElementById('word-modal');
        const modalWord = document.getElementById('modal-word');
        const modalDefinition = document.getElementById('modal-definition');
        const favoriteModalBtn = document.getElementById('favorite-modal-btn');
        const speakBtn = document.getElementById('speak-btn');
        const voiceSelect = document.getElementById('voice-select');
        const currentViewTitle = document.getElementById('current-view-title');

        // √âtat de l'application
        let currentWords = [...wordsArray];
        let currentLetter = 'all';
        let currentView = 'grid';
        let favorites = JSON.parse(localStorage.getItem('creoleFavorites')) || [];
        let currentModalWord = null;
        let voices = [];
        let selectedVoice = null;

        // Initialisation des voix
        function loadVoices() {
            // R√©cup√©rer les voix disponibles
            voices = speechSynthesis.getVoices();
            
            // Vider la liste d√©roulante
            voiceSelect.innerHTML = '<option value="">Choisir une voix</option>';
            
            // Filtrer les voix fran√ßaises et f√©minines
            const frenchFemaleVoices = voices.filter(voice => {
                return (voice.lang.includes('fr') || voice.lang.includes('FR')) && 
                       (voice.name.toLowerCase().includes('female') || 
                        voice.name.toLowerCase().includes('femme') ||
                        voice.name.toLowerCase().includes('victoria') ||
                        voice.name.toLowerCase().includes('audrey') ||
                        voice.name.toLowerCase().includes('chantal'));
            });
            
            // Ajouter les voix fran√ßaises f√©minines
            frenchFemaleVoices.forEach(voice => {
                const option = document.createElement('option');
                option.value = voice.name;
                option.textContent = `${voice.name} (${voice.lang})`;
                voiceSelect.appendChild(option);
            });
            
            // Si aucune voix f√©minine fran√ßaise n'est trouv√©e, afficher toutes les voix fran√ßaises
            if (frenchFemaleVoices.length === 0) {
                const frenchVoices = voices.filter(voice => voice.lang.includes('fr') || voice.lang.includes('FR'));
                frenchVoices.forEach(voice => {
                    const option = document.createElement('option');
                    option.value = voice.name;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    voiceSelect.appendChild(option);
                });
            }
            
            // S√©lectionner la premi√®re voix f√©minine par d√©faut
            if (frenchFemaleVoices.length > 0) {
                selectedVoice = frenchFemaleVoices[0];
                voiceSelect.value = selectedVoice.name;
            } else if (voices.length > 0) {
                // Fallback sur la premi√®re voix fran√ßaise
                const frenchVoices = voices.filter(voice => voice.lang.includes('fr') || voice.lang.includes('FR'));
                if (frenchVoices.length > 0) {
                    selectedVoice = frenchVoices[0];
                    voiceSelect.value = selectedVoice.name;
                }
            }
        }

        // Initialisation
        function init() {
            totalWords.textContent = wordsArray.length;
            updateFavoritesCount();
            createAlphabetNav();
            renderWords();
            setupEventListeners();
            
            // Charger les voix
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
            loadVoices();
        }

        // Cr√©ation de la navigation alphab√©tique
        function createAlphabetNav() {
            // Bouton "Tous"
            const allBtn = document.createElement('button');
            allBtn.className = 'alphabet-btn active';
            allBtn.textContent = 'Tous';
            allBtn.dataset.letter = 'all';
            alphabetNav.appendChild(allBtn);

            // Boutons pour chaque lettre
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
            letters.forEach(letter => {
                const btn = document.createElement('button');
                btn.className = 'alphabet-btn';
                btn.textContent = letter;
                btn.dataset.letter = letter;
                
                // V√©rifier si des mots commencent par cette lettre
                const hasWords = wordsArray.some(word => word.firstLetter === letter);
                if (!hasWords) {
                    btn.style.opacity = '0.3';
                    btn.style.cursor = 'not-allowed';
                }
                
                alphabetNav.appendChild(btn);
            });

            // √âv√©nement de clic sur les boutons de l'alphabet
            alphabetNav.addEventListener('click', (e) => {
                if (e.target.classList.contains('alphabet-btn')) {
                    const letter = e.target.dataset.letter;
                    
                    // Ignorer les lettres sans mots
                    if (e.target.style.opacity === '0.3') return;
                    
                    // Mettre √† jour l'√©tat actif
                    document.querySelectorAll('.alphabet-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    e.target.classList.add('active');
                    
                    // Filtrer les mots
                    currentLetter = letter;
                    activeLetter.textContent = letter === 'all' ? 'Toutes' : letter;
                    filterWords();
                }
            });
        }

        // Filtrage des mots
        function filterWords() {
            const searchTerm = searchInput.value.toLowerCase();
            
            // Filtre par lettre
            let filtered = currentLetter === 'all' 
                ? wordsArray 
                : wordsArray.filter(word => word.firstLetter === currentLetter);
            
            // Filtre par recherche
            if (searchTerm) {
                filtered = filtered.filter(word => 
                    word.word.toLowerCase().includes(searchTerm) || 
                    word.definition.toLowerCase().includes(searchTerm)
                );
            }
            
            currentWords = filtered;
            renderWords();
        }

        // Affichage des mots
        function renderWords() {
            // Mettre √† jour les compteurs
            displayedCount.textContent = currentWords.length;
            searchCount.textContent = currentWords.length === wordsArray.length 
                ? 'Tous les mots affich√©s' 
                : `${currentWords.length} mot(s) trouv√©(s)`;
            
            // Vider les conteneurs
            wordGrid.innerHTML = '';
            wordList.innerHTML = '';
            
            // Afficher le message si aucun mot n'est trouv√©
            if (currentWords.length === 0) {
                const message = document.createElement('div');
                message.style.gridColumn = '1 / -1';
                message.style.textAlign = 'center';
                message.style.padding = '3rem';
                message.style.color = 'var(--text-secondary)';
                message.style.fontSize = '1.2rem';
                message.textContent = 'Aucun mot ne correspond √† votre recherche.';
                wordGrid.appendChild(message);
                return;
            }
            
            // Rendre les mots selon la vue actuelle
            if (currentView === 'grid') {
                renderGridView();
            } else {
                renderListView();
            }
        }

        // Affichage en grille
        function renderGridView() {
            currentWords.forEach(word => {
                const card = createWordCard(word);
                wordGrid.appendChild(card);
            });
        }

        // Affichage en liste
        function renderListView() {
            currentWords.forEach(word => {
                const listItem = createListItem(word);
                wordList.appendChild(listItem);
            });
        }

        // Cr√©ation d'une carte de mot
        function createWordCard(word) {
            const card = document.createElement('div');
            card.className = 'word-card';
            card.innerHTML = `
                <div class="card-header">
                    <div>
                        <div class="word-title">${word.word}</div>
                        <div class="word-meta">Premi√®re lettre: ${word.firstLetter}</div>
                    </div>
                    <div class="card-actions">
                        <button class="icon-btn favorite-btn ${favorites.includes(word.id) ? 'active' : ''}" 
                                data-id="${word.id}" title="Favori">‚ù§Ô∏è</button>
                    </div>
                </div>
                <div class="definition">${word.definition}</div>
            `;
            
            card.addEventListener('click', (e) => {
                if (!e.target.classList.contains('favorite-btn')) {
                    openModal(word);
                }
            });
            
            return card;
        }

        // Cr√©ation d'un √©l√©ment de liste
        function createListItem(word) {
            const item = document.createElement('div');
            item.className = 'list-item';
            item.innerHTML = `
                <div class="list-word">${word.word}</div>
                <div class="list-definition">${word.definition}</div>
                <button class="icon-btn favorite-btn ${favorites.includes(word.id) ? 'active' : ''}" 
                        data-id="${word.id}" title="Favori">‚ù§Ô∏è</button>
            `;
            
            item.addEventListener('click', (e) => {
                if (!e.target.classList.contains('favorite-btn')) {
                    openModal(word);
                }
            });
            
            return item;
        }

        // Ouverture de la modal
        function openModal(word) {
            currentModalWord = word;
            modalWord.textContent = word.word;
            modalDefinition.textContent = word.definition;
            
            // Mettre √† jour le bouton favori
            favoriteModalBtn.textContent = favorites.includes(word.id) 
                ? '‚ù§Ô∏è Retirer des favoris' 
                : '‚ù§Ô∏è Ajouter aux favoris';
            
            modal.style.display = 'block';
        }

        // Fermeture de la modal
        function closeModal() {
            modal.style.display = 'none';
            currentModalWord = null;
        }

        // Gestion des favoris
        function toggleFavorite(wordId) {
            if (favorites.includes(wordId)) {
                favorites = favorites.filter(id => id !== wordId);
            } else {
                favorites.push(wordId);
            }
            
            localStorage.setItem('creoleFavorites', JSON.stringify(favorites));
            updateFavoritesCount();
            
            // Re-rendre les mots pour mettre √† jour les boutons favoris
            renderWords();
            
            // Mettre √† jour le bouton dans la modal si ouvert
            if (currentModalWord && currentModalWord.id === wordId) {
                favoriteModalBtn.textContent = favorites.includes(wordId) 
                    ? '‚ù§Ô∏è Retirer des favoris' 
                    : '‚ù§Ô∏è Ajouter aux favoris';
            }
        }

        // Mise √† jour du compteur de favoris
        function updateFavoritesCount() {
            favoritesCount.textContent = favorites.length;
        }

        // Synth√®se vocale avec voix f√©minine
        function speakWord(word) {
            if ('speechSynthesis' in window) {
                // Arr√™ter toute parole en cours
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'fr-FR';
                
                // Param√®tres pour une voix plus naturelle
                utterance.rate = 0.9; // L√©g√®rement plus lent
                utterance.pitch = 1.1; // L√©g√®rement plus aigu
                utterance.volume = 1.0;
                
                // Utiliser la voix s√©lectionn√©e
                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                } else {
                    // Fallback: chercher une voix f√©minine fran√ßaise
                    const frenchFemaleVoices = speechSynthesis.getVoices().filter(voice => {
                        return (voice.lang.includes('fr') || voice.lang.includes('FR')) && 
                               (voice.name.toLowerCase().includes('female') || 
                                voice.name.toLowerCase().includes('femme'));
                    });
                    
                    if (frenchFemaleVoices.length > 0) {
                        utterance.voice = frenchFemaleVoices[0];
                    }
                }
                
                // D√©marrer la synth√®se
                speechSynthesis.speak(utterance);
            } else {
                alert('La synth√®se vocale n\'est pas support√©e par votre navigateur.');
            }
        }

        // Configuration des √©couteurs d'√©v√©nements
        function setupEventListeners() {
            // Recherche
            searchInput.addEventListener('input', filterWords);
            
            // Changement de vue
            viewBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const view = btn.dataset.view;
                    
                    // Mettre √† jour les boutons
                    viewBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Changer la vue
                    currentView = view;
                    currentViewTitle.textContent = view === 'grid' ? 'Tous les mots' : 'Liste des mots';
                    
                    // Afficher/masquer les conteneurs
                    if (view === 'grid') {
                        wordGrid.style.display = 'grid';
                        wordList.style.display = 'none';
                    } else {
                        wordGrid.style.display = 'none';
                        wordList.style.display = 'block';
                    }
                    
                    // Re-rendre les mots
                    renderWords();
                });
            });
            
            // Gestion des favoris
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('favorite-btn')) {
                    e.stopPropagation();
                    const wordId = parseInt(e.target.dataset.id);
                    toggleFavorite(wordId);
                }
            });
            
            // Modal
            document.querySelector('.close-btn').addEventListener('click', closeModal);
            window.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
            
            // Boutons de la modal
            favoriteModalBtn.addEventListener('click', () => {
                if (currentModalWord) {
                    toggleFavorite(currentModalWord.id);
                }
            });
            
            speakBtn.addEventListener('click', () => {
                if (currentModalWord) {
                    speakWord(currentModalWord.word);
                }
            });
            
            // S√©lection de voix
            voiceSelect.addEventListener('change', () => {
                const selectedVoiceName = voiceSelect.value;
                if (selectedVoiceName) {
                    selectedVoice = voices.find(voice => voice.name === selectedVoiceName);
                } else {
                    selectedVoice = null;
                }
            });
        }

        // Initialiser l'application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>